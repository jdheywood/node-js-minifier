{"version":3,"sources":["minifier.js"],"names":[],"mappings":"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","file":"minifier.js","sourcesContent":["import * as fs from \"fs\";\r\n\r\nvar myInput = '';\r\nvar myCharA = '';\r\nvar myCharB = '';\r\nvar myCharC = '';\r\nvar myCharD = '';\r\nvar myLast = '';\r\nvar myLastNws = '';\r\nvar myLastReadChar = '';\r\nvar myOutput = '';\r\nvar myPosition = 0;\r\n\r\nexport function readFile(filename) {\r\n\tvar file = fs.readFileSync(filename, \"utf8\");\r\n\treturn file;\r\n}\r\n\r\nexport function isAlphanumeric(input) { // This is poorly named, it does a little more than check for alpha numeric values!\r\n\tvar expr = /[\\w\\$\\\\]/;\r\n\treturn expr.test(input) || input.charCodeAt() > 126;\r\n}\r\n\r\nexport function isEndspace(input) {\r\n\treturn (input === '\\n' || input === '\\r' || input === '\\f')\r\n}\r\n\r\nexport function isWhitespace(input) {\r\n\tvar expr = /\\s/\r\n\treturn expr.test(input);\r\n}\r\n\r\n/* New line characters before or after these characters can be removed.\r\n   Not + - / in this list because they require special care. */\r\nexport function isInfix(input) {\r\n\tvar expr = /[,;:=&%*<>\\?\\|\\n]/;\r\n\treturn expr.test(input);\r\n}\r\n\r\n// New line characters after these characters can be removed.\r\nexport function isPrefix(input) {\r\n\tvar expr = /[\\{\\(\\[!]/; \r\n\treturn (expr.test(input) || isInfix(input));\r\n}\r\n\r\n// New line characters before these characters can removed.\r\nexport function isPostfix(input) {\r\n\tvar expr = /[\\}\\)\\]]/; \r\n\treturn (expr.test(input) || isInfix(input));\r\n}\r\n\r\nexport function getChar() {\r\n\tif (myPosition < myInput.length) {\r\n\t\tmyLastReadChar = myInput.charAt(myPosition++);\r\n\t\treturn myLastReadChar;\r\n\t}\r\n\telse {\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\r\nexport function putChar(char) {\r\n\tmyOutput = myOutput.concat(char);\r\n}\r\n\r\nexport function defined(thing) {\r\n\treturn (typeof thing !== 'undefined');\r\n}\r\n\r\n\r\n// print a\r\n// move b to a\r\n// move c to b\r\n// move d to c\r\n// new d\r\n//\r\n// i.e. print a and advance\r\nfunction action1() {\r\n  if (!isWhitespace(myCharA)) {\r\n    myLastNws = myCharA;\r\n  }\r\n  myLast = myCharA;\r\n  action2();\r\n}\r\n\r\n// sneeky output a for comments\r\nfunction action2() {\r\n  putChar(myCharA);\r\n  action3();\r\n}\r\n\r\n// move b to a\r\n// move c to b\r\n// move d to c\r\n// new d\r\n//\r\n// i.e. delete a\r\nfunction action3() {\r\n  myCharA = myCharB;\r\n  action4();\r\n}\r\n\r\n// move c to b\r\n// move d to c\r\n// new d\r\n//\r\n// i.e. delete b\r\nfunction action4() {\r\n  myCharB = myCharC;\r\n  myCharC = myCharD;\r\n  myCharD = getChar();\r\n}\r\n\r\n// put string and regexp literals\r\n// when this sub is called, myCharA is on the opening delimiter character\r\nfunction putLiteral() {\r\n\tvar delimiter = myCharA; // ', \" or /\r\n\taction1();\r\n\tdo {\r\n\t\twhile (defined(myCharA) && myCharA === '\\\\') {\r\n\t\t\taction1();\r\n\t\t\taction1();\r\n\t\t}\r\n\t\taction1();\r\n\t} while (myLast !== delimiter);\r\n\tif (myLast !== delimiter) {\r\n\r\n\t\tvar start = 'unterminated '\r\n\t\tvar descriptive = '';\r\n\t\tswitch(delimiter) {\r\n\t\t    case '\\'':\r\n\t\t        descriptive = 'single quoted string';\r\n\t\t        break;\r\n\t\t    case '\"':\r\n\t\t        descriptive = 'double quoted string';\r\n\t\t        break;\r\n\t\t    default:\r\n\t\t    \tdescriptive = 'regular expression';\r\n\t\t}\r\n\t\tvar end = 'literal, stopped processing';\r\n\r\n\t\tthrow `${start} ${descriptive} ${end}`;\r\n\t}\r\n}\r\n\r\n// If a is a whitespace then collapse all following whitespace.\r\n// If any of the whitespace is a new line then ensure a is a new line\r\n// when this function ends.\r\nfunction collapseWhitespace() {\r\n\twhile (defined(myCharA) && isWhitespace(myCharA) && \r\n\t\t   defined(myCharB) && isWhitespace(myCharB)) {\r\n\t\tif (isEndspace(myCharA) || isEndspace(myCharB)) {\r\n\t\t\tmyCharA = '\\n';\r\n\t\t}\r\n\t\taction4(); // delete b\r\n\t}\r\n}\r\n\r\n// Advance a to non-whitespace or end of file.\r\n// Doesn't print any of this whitespace.\r\nfunction skipWhitespace() {\r\n  while (defined(myCharA) && isWhitespace(myCharA)) {\r\n    action3();\r\n  }\r\n}\r\n\r\n// Advance a to non-whitespace or end of file\r\n// If any of the whitespace is a new line then print one new line.\r\nfunction preserveEndspace() {\r\n  collapseWhitespace();\r\n  if (defined(myCharA) && isEndspace(myCharA) && defined(myCharB) && !isPostfix(myCharB) ) {\r\n    action1();\r\n  }\r\n  skipWhitespace();\r\n}\r\n\r\nfunction replaceAll(find, replace, str) {\r\n  return str.replace(new RegExp(find, 'g'), replace);\r\n}\r\n\r\nfunction onWhitespaceConditionalComment() {\r\n  return (defined(myCharA) && isWhitespace(myCharA) &&\r\n          defined(myCharB) && myCharB === '/' &&\r\n          defined(myCharC) && (myCharC === '/' || myCharC === '*') &&\r\n          defined(myCharD) && myCharD === '@');\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------\r\n\r\nexport function minify(filename, stripDebug) {\r\n\t// Reset in case we've already run\r\n\tmyLastReadChar = '';\r\n\tmyPosition = 0; \r\n\tmyOutput = ''; \r\n\r\n\t// read the file\r\n\tmyInput = readFile(filename);\r\n\r\n\t// set up the buffer\r\n\tmyCharA = getChar();\r\n\twhile (defined(myCharA) && isWhitespace(myCharA)) {\r\n\t\tmyCharA = getChar();\r\n\t}\r\n\tmyCharB = getChar();\r\n\tmyCharC = getChar();\r\n\tmyCharD = getChar();\r\n\tmyLast = undefined;\r\n\tmyLastNws = undefined;\r\n\r\n\tvar ccFlag = false;\r\n\r\n\twhile (defined(myCharA)) {\r\n\r\n\t\tif (isWhitespace(myCharA)) {\r\n\t\t\tthrow 'minifier bug: minify loop starting with whitespace, barfed!';\r\n\t\t}\r\n\r\n\t\t// Each branch handles trailing whitespace and ensures a is on non-whitespace or is undefined when branch finishes\r\n\t\tif (myCharA === '/') { // a division, comment, or regexp literal\r\n\t      \tif (defined(myCharB) && myCharB === '/') { // slash-slash comment\r\n\t        \tccFlag = defined(myCharC) && myCharC === '@'; // tests in IE7 show no space allowed between slashes and at symbol\r\n\t        \twhile (defined(myCharA) && !isEndspace(myCharA)) {\r\n\t        \t\tccFlag ? action2() : action3();\r\n\t        \t}\r\n\t        \tif (defined(myCharA)) { // a is a new line\r\n\t          \t\tif (ccFlag) {\r\n\t            \t\taction1(); // cannot use preserveEndspace() here because it might not print the new line\r\n\t            \t\tskipWhitespace();\r\n\t          \t\t}\r\n\t          \t\telse if (defined(myLast) && !isEndspace(myLast) && !isPrefix(myLast)) {\r\n\t            \t\tpreserveEndspace();\r\n\t          \t\t}\r\n\t          \t\telse {\r\n\t            \t\tskipWhitespace();\r\n\t          \t\t}\r\n\t        \t}\r\n\t      \t}\r\n\t\t\telse if (defined(myCharB) && myCharB === '*') { // slash-star comment\r\n\t    \t\tccFlag = (defined(myCharC) && myCharC === '@'); // test in IE7 shows no space allowed between star and at symbol\r\n\t    \t\twhile (defined(myCharB) && !(myCharA === '*' && myCharB === '/')) {\r\n\t      \t\t\tccFlag ? action2() : action3();\r\n\t    \t\t}\r\n\t    \t\tif (defined(myCharB)) { // a is asterisk and b is foreslash\r\n\t      \t\t\tif (ccFlag) {\r\n\t        \t\t\taction2(); // the *\r\n\t        \t\t\taction2(); // the /\r\n\t        \t\t\t// inside the conditional comment there may be a missing terminal semi-colon\r\n\t        \t\t\tpreserveEndspace();\r\n\t      \t\t\t}\r\n\t      \t\t\telse { // the comment is being removed\r\n\t        \t\t\taction3(); // the *\r\n\t        \t\t\taction3();\r\n\t        \t\t\tmyCharA = ' ';  // the /\r\n\t        \t\t\tcollapseWhitespace();\r\n\t        \t\t\tif (defined(myLast) && defined(myCharB) &&\r\n\t            \t\t\t((isAlphanumeric(myLast) && (isAlphanumeric(myCharB) || myCharB === '.')) ||\r\n\t             \t\t\t(myLast === '+' && myCharB === '+') || (myLast === '-' && myCharB === '-'))) { // for a situation like 5-/**/-2 or a/**/a\r\n\t          \t\t\t\t// When entering this block a is whitespace.\r\n\t          \t\t\t\t// The comment represented whitespace that cannot be removed. Therefore replace the now gone comment with a whitespace.\r\n\t          \t\t\t\taction1();\r\n\t        \t\t\t}\r\n\t        \t\t\telse if (defined(myLast) && !isPrefix(myLast)) {\r\n\t          \t\t\t\tpreserveEndspace();\r\n\t        \t\t\t}\r\n\t        \t\t\telse {\r\n\t          \t\t\t\tskipWhitespace();\r\n\t        \t\t\t}\r\n\t      \t\t\t}\r\n\t    \t\t}\r\n\t    \t\telse {\r\n\t      \t\t\tthrow 'unterminated comment, stopped';\r\n\t    \t\t}\r\n\t  \t\t}\r\n\t  \t\telse if ( defined(myLastNws) && (myLastNws === ')' || myLastNws === ']' || myLastNws === '.' || isAlphanumeric(myLastNws)) ) { // division\r\n\t    \t\taction1();\r\n\t    \t\tcollapseWhitespace();\r\n\t    \t\t// don't want a division to become a slash-slash comment with following conditional comment\r\n\t    \t\tonWhitespaceConditionalComment() ? action1() : preserveEndspace();\r\n\t  \t\t}\r\n\t  \t\telse { // regexp literal\r\n\t    \t\tputLiteral();\r\n\t    \t\tcollapseWhitespace();\r\n\t    \t\t// don't want closing delimiter to become a slash-slash comment with following conditional comment\r\n\t    \t\tonWhitespaceConditionalComment() ? action1() : preserveEndspace();\r\n\t  \t\t}\r\n\t\t}\r\n\t\telse if (myCharA === '\\'' || myCharA === '\"' ) { // string literal\r\n\t  \t\tputLiteral();\r\n\t  \t\tpreserveEndspace();\r\n\t\t}\r\n\t\telse if (myCharA === '+' || myCharA === '-') { // careful with + + and - -\r\n\t  \t\taction1();\r\n\t  \t\tcollapseWhitespace();\r\n\t  \t\tif (defined(myCharA) && isWhitespace(myCharA)) {\r\n\t    \t\t(defined(myCharB) && myCharB == myLast) ? action1() : preserveEndspace();\r\n\t  \t\t}\r\n\t\t}\r\n\t\telse if (isAlphanumeric(myCharA)) { // keyword, identifiers, numbers\r\n\t  \t\taction1();\r\n\t  \t\tcollapseWhitespace();\r\n\t  \t\tif (defined(myCharA) && isWhitespace(myCharA)) {\r\n\t    \t\t// if b is '.' could be (12 .toString()) which is property invocation. If space removed becomes decimal point and error.\r\n\t    \t\t(defined(myCharB) && (isAlphanumeric(myCharB) || myCharB === '.')) ? action1() : preserveEndspace();\r\n\t  \t\t}\r\n\t\t}\r\n\t\telse if (myCharA === ']' || myCharA === '}' || myCharA === ')') { // no need to be followed by space but maybe needs following new line\r\n\t  \t\taction1();\r\n\t  \t\tpreserveEndspace();\r\n\t\t}\r\n\t\telse if (stripDebug && myCharA == ';' &&\r\n\t       \t\tdefined(myCharB) && myCharB == ';' &&\r\n\t       \t\tdefined(myCharC) && myCharC == ';') {\r\n\t  \t\taction3(); // delete one of the semi-colons\r\n\t  \t\tmyCharA = '/'; // replace the other two semi-colons\r\n\t  \t\tmyCharB = '/'; // so the remainder of line is removed\r\n\t\t}\r\n\t\telse { // anything else just prints and trailing whitespace discarded\r\n\t  \t\taction1();\r\n\t  \t\tskipWhitespace();\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tif (defined(myLastReadChar) && myLastReadChar == '\\n') {\r\n    \tputChar('\\n');\r\n  \t}\r\n\r\n  \treturn myOutput;\r\n} // fin\r\n\r\nexport function miniOutput() {\r\n\treturn myOutput;\r\n}\r\n"]}